//=============================================
// index.js
//---------------------------------------------
// Sets up all models for database useage
//---------------------------------------------
// Author: Ryan Sullivan
// Created: 2/15/2013
// Updated: 2/15/2013
//=============================================
var Sequelize = require("sequelize");
var sequelize = new Sequelize('MineshafterSquaredDev', 'root', 'caroline', { host: '192.168.1.103', port: '3306', logging: false });

// Import all models
var User      = sequelize.import(__dirname + '/User');
var UserType  = sequelize.import(__dirname + '/UserType');
var Post      = sequelize.import(__dirname + '/Post');
var Topic     = sequelize.import(__dirname + '/Topic');

// Setup Associations
User.belongsTo(UserType);
Post.belongsTo(Post, { foreignKey: 'reply_to' });
Post.hasMany(Post, { as: 'Replies', foreignKey: 'reply_to',  useJunctionTable: false });
Topic.belongsTo(Post);

// Export Models
module.exports = {
  User        : User,
  UserType    : UserType,
  Post        : Post,
  Topic       : Topic
}